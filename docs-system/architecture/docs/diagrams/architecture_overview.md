# Architecture Overview Diagrams

## Component Architecture

```
+---------------------------------------------------------------------+
|                        Documentation System                          |
+---------------------------------------------------------------------+
                                 |
          +--------------------------------------------+
          |                                            |
          v                                            v
+-------------------+                    +-------------------------+
| Web Application   |                    | API Layer               |
| - UI Components   |  <--------------->| - REST API              |
| - Client State    |                    | - GraphQL API           |
| - User Interface  |                    | - Webhooks              |
+-------------------+                    +-------------------------+
                                                     |
                                                     v
+----------------------------------------------------------------------+
|                          Application Layer                           |
+----------------------------------------------------------------------+
| +----------------+  +----------------+  +-------------------+        |
| | Document       |  | Workflow       |  | Template          |        |
| | Management     |  | Management     |  | Management        |        |
| +----------------+  +----------------+  +-------------------+        |
|                                                                      |
| +----------------+  +----------------+  +-------------------+        |
| | User           |  | Search &       |  | Audit &           |        |
| | Management     |  | Discovery      |  | Compliance        |        |
| +----------------+  +----------------+  +-------------------+        |
+----------------------------------------------------------------------+
                                |
                                v
+----------------------------------------------------------------------+
|                            Domain Layer                              |
+----------------------------------------------------------------------+
| +----------------+  +----------------+  +-------------------+        |
| | Document       |  | Workflow       |  | Template          |        |
| | Domain         |  | Domain         |  | Domain            |        |
| +----------------+  +----------------+  +-------------------+        |
|                                                                      |
| +----------------+  +----------------+  +-------------------+        |
| | User           |  | Search         |  | Audit             |        |
| | Domain         |  | Domain         |  | Domain            |        |
| +----------------+  +----------------+  +-------------------+        |
+----------------------------------------------------------------------+
                                |
                                v
+----------------------------------------------------------------------+
|                        Infrastructure Layer                          |
+----------------------------------------------------------------------+
| +----------------+  +----------------+  +------------------+         |
| | Persistence    |  | External       |  | Security         |         |
| | Services       |  | Integrations   |  | Infrastructure   |         |
| +----------------+  +----------------+  +------------------+         |
|                                                                      |
| +----------------+  +----------------+  +------------------+         |
| | Caching        |  | Messaging      |  | File Storage     |         |
| | Services       |  | Services       |  | Services         |         |
| +----------------+  +----------------+  +------------------+         |
|                                                                      |
| +----------------+  +----------------+  +------------------+         |
| | Observability  |  | AI Services    |  | Search Services  |         |
| | Services       |  |                |  |                  |         |
| +----------------+  +----------------+  +------------------+         |
+----------------------------------------------------------------------+
           |                |                  |                |
           v                v                  v                v
+-------------+    +-------------+    +----------------+    +------------+
| Databases   |    | Message     |    | External       |    | File       |
| (SQL/NoSQL) |    | Brokers     |    | APIs           |    | Storage    |
+-------------+    +-------------+    +----------------+    +------------+
```

## Clean Architecture Layers

```
+-----------------------------------------------------+
|                 INTERFACES LAYER                    |
|                                                     |
| +-------------+  +------------+  +---------------+  |
| | Web UI      |  | API        |  | CLI           |  |
| | Controllers |  | Controllers|  | Commands      |  |
| +-------------+  +------------+  +---------------+  |
+-----------------------------------------------------+
                         |
                         | Depends on
                         v
+-----------------------------------------------------+
|                APPLICATION LAYER                    |
|                                                     |
| +--------------+  +-------------+  +--------------+ |
| | Use Cases    |  | DTOs        |  | Interfaces   | |
| | Application  |  | Validation  |  | Services     | |
| | Services     |  | Logic       |  | Contracts    | |
| +--------------+  +-------------+  +--------------+ |
+-----------------------------------------------------+
                         |
                         | Depends on
                         v
+-----------------------------------------------------+
|                   DOMAIN LAYER                      |
|                                                     |
| +--------------+  +-------------+  +--------------+ |
| | Entities     |  | Value       |  | Domain       | |
| | Aggregates   |  | Objects     |  | Services     | |
| | Domain       |  | Domain      |  | Domain       | |
| | Events       |  | Rules       |  | Exceptions   | |
| +--------------+  +-------------+  +--------------+ |
+-----------------------------------------------------+
                         ^
                         | Implements
                         |
+-----------------------------------------------------+
|               INFRASTRUCTURE LAYER                  |
|                                                     |
| +--------------+  +-------------+  +--------------+ |
| | Repositories |  | Persistence |  | External     | |
| | API Clients  |  | Adapters    |  | Service      | |
| | Auth         |  | Caching     |  | Adapters     | |
| | Services     |  | Storage     |  | Messaging    | |
| +--------------+  +-------------+  +--------------+ |
+-----------------------------------------------------+
```

## Domain Model

```
+---------------+       +----------------+       +---------------+
| Document      |1     *| Version        |      *| Comment       |
|---------------|<----->|----------------|<----->|---------------|
| id            |       | id             |       | id            |
| title         |       | documentId     |       | documentId    |
| status        |       | versionNumber  |       | authorId      |
| ownerId       |       | content        |       | content       |
| createdAt     |       | createdAt      |       | createdAt     |
| updatedAt     |       | createdBy      |       | status        |
| metadata      |       | changes        |       |               |
+---------------+       +----------------+       +---------------+
        ^                                              ^
        |                                              |
        | 1                                          * |
+---------------+       +----------------+       +---------------+
| Template      |1     *| Section        |      *| Block         |
|---------------|<----->|----------------|<----->|---------------|
| id            |       | id             |       | id            |
| name          |       | templateId     |       | sectionId     |
| description   |       | name           |       | type          |
| createdAt     |       | order          |       | content       |
| updatedAt     |       | required       |       | metadata      |
| categoryId    |       | description    |       | order         |
| status        |       |                |       |               |
+---------------+       +----------------+       +---------------+
        ^                                              ^
        |                                              |
        | *                                          * |
+---------------+       +----------------+       +---------------+
| Workflow      |1     *| WorkflowStep   |      *| Task          |
|---------------|<----->|----------------|<----->|---------------|
| id            |       | id             |       | id            |
| name          |       | workflowId     |       | stepId        |
| description   |       | name           |       | name          |
| status        |       | order          |       | status        |
| createdAt     |       | roleId         |       | assigneeId    |
| updatedAt     |       | status         |       | dueDate       |
|               |       | type           |       | completedAt   |
+---------------+       +----------------+       +---------------+
        ^                      ^
        |                      |
        | *                  * |
+---------------+       +----------------+       +---------------+
| User          |1     *| Role           |*     *| Permission    |
|---------------|<----->|----------------|<----->|---------------|
| id            |       | id             |       | id            |
| username      |       | name           |       | name          |
| email         |       | description    |       | description   |
| status        |       | permissions    |       | resource      |
| firstName     |       |                |       | action        |
| lastName      |       |                |       | conditions    |
| settings      |       |                |       |               |
+---------------+       +----------------+       +---------------+
```

## Bounded Contexts and Interactions

```
+-----------------------------------+
|                                   |
|  +---------------------------+    |
|  |                           |    |
|  |  Document Management      |    |
|  |  Context                  |    |
|  |                           |    |
|  +---------------------------+    |
|              |                    |
|              | Publishes          |
|              v                    |
|  +---------------------------+    |
|  |                           |    |
|  |  Workflow Context         |    |
|  |                           |    |
|  +---------------------------+    |
|              |                    |
|              | Subscribes         |
|              v                    |
|  +---------------------------+    |
|  |                           |    |
|  |  Notification Context     |    |
|  |                           |    |
|  +---------------------------+    |
|                                   |
+-----------------------------------+
                  |
         Customer/Supplier
                  v
+-----------------------------------+
|                                   |
|  +---------------------------+    |
|  |                           |    |
|  |  User Management          |    |
|  |  Context                  |    |
|  |                           |    |
|  +---------------------------+    |
|               |                   |
|               | Conformist        |
|               v                   |
|  +---------------------------+    |
|  |                           |    |
|  |  Authentication           |    |
|  |  Context                  |    |
|  |                           |    |
|  +---------------------------+    |
|               |                   |
|               | Anti-corruption   |
|               v                   |
|  +---------------------------+    |
|  |                           |    |
|  |  Authorization            |    |
|  |  Context                  |    |
|  |                           |    |
|  +---------------------------+    |
|                                   |
+-----------------------------------+
                  |
            Partnership
                  v
+-----------------------------------+
|                                   |
|  +---------------------------+    |
|  |                           |    |
|  |  Audit & Compliance       |    |
|  |  Context                  |    |
|  |                           |    |
|  +---------------------------+    |
|               |                   |
|               | Open Host         |
|               v                   |
|  +---------------------------+    |
|  |                           |    |
|  |  Reporting Context        |    |
|  |                           |    |
|  +---------------------------+    |
|                                   |
+-----------------------------------+
                  |
          Shared Kernel
                  v
+-----------------------------------+
|                                   |
|  +---------------------------+    |
|  |                           |    |
|  |  Template Context         |    |
|  |                           |    |
|  +---------------------------+    |
|                |                  |
|                | Published        |
|                | Language         |
|                v                  |
|  +---------------------------+    |
|  |                           |    |
|  |  Content Validation       |    |
|  |  Context                  |    |
|  |                           |    |
|  +---------------------------+    |
|                                   |
+-----------------------------------+
```

## Deployment Architecture

```
                      +---------------+
  Users                |   CDN        |
   |                   +---------------+
   v                          |
+---------------+             |
|  Load         |             |
|  Balancer     |<------------+
+---------------+
       |
       +---------------------------+
       |                           |
       v                           v
+---------------+         +---------------+
| Application   | <-----> | Application   |
| Server (1)    |         | Server (2)    |
+---------------+         +---------------+
       |                           |
       +---------------------------+
       |
       v
+--------------------------------------------------+
|                  Service Layer                    |
|                                                   |
| +-------------+  +-------------+  +------------+ |
| | Document    |  | Workflow    |  | User       | |
| | Service     |  | Service     |  | Service    | |
| +-------------+  +-------------+  +------------+ |
|                                                   |
| +-------------+  +-------------+  +------------+ |
| | Template    |  | Search      |  | Audit      | |
| | Service     |  | Service     |  | Service    | |
| +-------------+  +-------------+  +------------+ |
+--------------------------------------------------+
       |                |                |
       v                v                v
+-------------+  +-------------+  +-------------+
| Database    |  | Search      |  | File        |
| Cluster     |  | Engine      |  | Storage     |
+-------------+  +-------------+  +-------------+
       |                                |
       v                                v
+-------------+                 +-------------+
| Database    |                 | Backup      |
| Replica     |                 | Storage     |
+-------------+                 +-------------+
```

## Sequence Diagram: Document Creation

```
+--------+        +--------+        +--------+        +--------+        +--------+
| Client |        | API    |        | App    |        | Domain |        | DB     |
|        |        | Layer  |        | Layer  |        | Layer  |        | Layer  |
+--------+        +--------+        +--------+        +--------+        +--------+
    |                 |                 |                 |                 |
    | Create Document |                 |                 |                 |
    |---------------->|                 |                 |                 |
    |                 | Validate Request|                 |                 |
    |                 |---------------->|                 |                 |
    |                 |                 | Create Document |                 |
    |                 |                 |---------------->|                 |
    |                 |                 |                 | Create Document |
    |                 |                 |                 |---------------->|
    |                 |                 |                 |                 |
    |                 |                 |                 | Return ID       |
    |                 |                 |                 |<----------------|
    |                 |                 |                 |                 |
    |                 |                 |                 | Create Event    |
    |                 |                 |                 |-------+         |
    |                 |                 |                 |       |         |
    |                 |                 |                 |<------+         |
    |                 |                 | Return Document |                 |
    |                 |                 |<----------------|                 |
    |                 | Format Response |                 |                 |
    |                 |<----------------|                 |                 |
    | Document Created|                 |                 |                 |
    |<----------------|                 |                 |                 |
    |                 |                 |                 |                 |
```

## Sequence Diagram: Document Workflow Processing

```
+--------+      +--------+      +--------+      +--------+      +--------+
| User   |      | API    |      |Document|      |Workflow|      |Notif.  |
|        |      | Layer  |      |Service |      |Service |      |Service |
+--------+      +--------+      +--------+      +--------+      +--------+
    |               |               |               |               |
    | Assign to WF  |               |               |               |
    |-------------->|               |               |               |
    |               | Validate      |               |               |
    |               |-------------->|               |               |
    |               |               | Get Document  |               |
    |               |               |-------------->|               |
    |               |               |               |               |
    |               |               | Document Info |               |
    |               |               |<--------------|               |
    |               |               |               |               |
    |               |               | Assign to WF  |               |
    |               |               |-------------->|               |
    |               |               |               | Create Tasks  |
    |               |               |               |-------------->|
    |               |               |               |               |
    |               |               |               | Tasks Created |
    |               |               |               |<--------------|
    |               |               |               |               |
    |               |               |               | Notify Users  |
    |               |               |               |-------------->|
    |               |               |               |               |
    |               |               | Workflow ID   |               |
    |               |               |<--------------|               |
    |               | Result        |               |               |
    |               |<--------------|               |               |
    | Success       |               |               |               |
    |<--------------|               |               |               |
    |               |               |               |               |
```